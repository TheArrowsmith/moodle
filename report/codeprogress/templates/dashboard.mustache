{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template report_codeprogress/dashboard

    Code progress dashboard template

    Context variables required for this template:
    * courseid - Course ID
}}
<div id="progress-dashboard-container">
    <div class="alert alert-info" id="loading-message">
        <i class="fa fa-spinner fa-spin"></i> {{#str}}loadingdata, report_codeprogress{{/str}}
    </div>
    
    <div id="progress-content" style="display: none;">
        <div id="progress-table-container">
            <div class="table-responsive">
                <table class="table table-striped table-hover" id="progress-table">
                    <thead class="thead-light">
                        <tr id="table-header">
                            <th class="sticky-col">{{#str}}student, core{{/str}}</th>
                            <!-- Assignment columns added dynamically -->
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Rows added dynamically -->
                    </tbody>
                    <tfoot id="table-footer">
                        <!-- Summary row added dynamically -->
                    </tfoot>
                </table>
            </div>
        </div>
        
        <div id="chart-container" class="mt-4">
            <h3>{{#str}}charttitle, report_codeprogress{{/str}}</h3>
            <div class="row">
                <div class="col-md-6">
                    <canvas id="average-scores-chart"></canvas>
                </div>
                <div class="col-md-6">
                    <canvas id="submission-status-chart"></canvas>
                </div>
            </div>
        </div>
        
        <div id="summary-stats" class="mt-4">
            <div class="row">
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5 class="card-title">Total Students</h5>
                            <p class="card-text display-4" id="total-students">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5 class="card-title">Assignments</h5>
                            <p class="card-text display-4" id="total-assignments">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5 class="card-title">Avg. Score</h5>
                            <p class="card-text display-4" id="overall-average">0%</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5 class="card-title">Completion</h5>
                            <p class="card-text display-4" id="completion-rate">0%</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="alert alert-danger" id="error-message" style="display: none;">
        <i class="fa fa-exclamation-triangle"></i> <span id="error-text"></span>
    </div>
</div>